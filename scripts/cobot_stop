#!/bin/bash
# cobot_nodeå®‰å…¨åœæ­¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

echo "ğŸ›‘ cobot_nodeåœæ­¢ä¸­..."

# cobot_nodeãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
if pgrep -f "cobot_node" > /dev/null; then
    echo "ğŸ“‹ åœæ­¢å¯¾è±¡ãƒ—ãƒ­ã‚»ã‚¹:"
    ps aux | grep cobot_node | grep -v grep
    
    echo "â¹ï¸ é€šå¸¸åœæ­¢å®Ÿè¡Œä¸­..."
    pkill -f cobot_node
    sleep 3
    
    # ã¾ã å‹•ã„ã¦ã„ã‚‹å ´åˆã¯å¼·åˆ¶åœæ­¢
    if pgrep -f "cobot_node" > /dev/null; then
        echo "ğŸ”¥ å¼·åˆ¶åœæ­¢å®Ÿè¡Œä¸­..."
        pkill -9 -f cobot_node
        sleep 2
    fi
    
    # åœæ­¢ç¢ºèª
    if pgrep -f "cobot_node" > /dev/null; then
        echo "âŒ åœæ­¢ã«å¤±æ•—ã—ã¾ã—ãŸ"
        ps aux | grep cobot_node | grep -v grep
    else
        echo "âœ… cobot_nodeåœæ­¢å®Œäº†"
    fi
else
    echo "â„¹ï¸ cobot_nodeã¯å‹•ä½œã—ã¦ã„ã¾ã›ã‚“"
fi
