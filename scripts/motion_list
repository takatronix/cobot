#!/bin/bash
# 📂 Motion list
echo "📂 保存済みモーション一覧:"
echo

if [ ! -d ~/cobot/motions ]; then
    echo "❌ motionsディレクトリが見つかりません"
    exit 1
fi

cd ~/cobot/motions

if [ -z "$(ls -A . 2>/dev/null)" ]; then
    echo "📭 保存されたモーションはありません"
    echo "使用法: ./record <motion_name> でモーション記録"
    exit 0
fi

echo "番号  モーション名              サイズ    更新日時"
echo "----  ----------------------  --------  -------------------"

i=1
for file in *.json; do
    if [ -f "$file" ]; then
        name="${file%.json}"
        size=$(ls -lh "$file" | awk '{print $5}')
        date=$(ls -l "$file" | awk '{print $6, $7, $8}')
        printf "%-4d  %-22s  %-8s  %s\n" "$i" "$name" "$size" "$date"
        i=$((i + 1))
    fi
done

echo
echo "再生: ./play <motion_name> [speed]"
echo "例: ./play test_motion 1.5"